{% extends "base.html" %}
{% block title %}{{ user.name|e }}{% endblock %}
{% block content %}
  <div class="row">
    <div class="col-md-9">
      <h1>{{ user.name|e }}</h1>
      {% if user.about_me %}
        <p><strong>About:</strong> {{ user.about_me|e }}</p>
      {% endif %}
      <p>Member since: {{ moment(user.member_since).format('LL') }}</p>
      <p>Last seen: {{ moment(user.last_seen).fromNow() }}</p>
      {% if current_user.is_authenticated and current_user.username == user.username %}
        <a href="{{ url_for('main.edit_profile') }}" class="btn btn-secondary mb-3">Edit Profile</a>
      {% endif %}
      <h3>Clients</h3>
      {% if posts %}
        <ul class="list-group mb-4">
          {% for post in posts %}
            <li class="list-group-item">
              <a href="{{ url_for('main.editpost', id=post.id) }}">{{ post.clientname|e }}</a>
              ({{ post.clientemail|e }})<br>
              {{ post.clientinfo|safe }}
            </li>
          {% endfor %}
        </ul>
      {% else %}
        <div class="alert alert-info">No clients found for this user.</div>
      {% endif %}
      <nav aria-label="Pagination">
        <ul class="pagination">
          {% if prev_url %}
            <li class="page-item"><a class="page-link" href="{{ prev_url }}">Previous</a></li>
          {% endif %}
          {% if next_url %}
            <li class="page-item"><a class="page-link" href="{{ next_url }}">Next</a></li>
          {% endif %}
        </ul>
      </nav>
    </div>
    <div class="col-md-3">
      <img src="{{ user.avatar(128) }}" class="img-fluid rounded-circle mb-3" alt="User Avatar">
    </div>
  </div>
{% endblock %}